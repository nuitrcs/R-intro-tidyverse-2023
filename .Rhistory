library(tidyverse)
police <- read_csv("https://raw.githubusercontent.com/nuitrcs/r-tidyverse/main/data/ev_police.csv",
col_types=c( "location"="c"))
names(police)
select(police, outcome, date)
select(police, raw_DriverRace:raw_ResultOfStop)
select(police, 26:29)
select(police, last_col())
select(police, last_col(0:3))
select(police, -raw_row_number, -subject_age, time:outcome)
police %>% select(where(is.numeric))
police %>%
mutate(vehicle_age = 2017 - vehicle_year,
vehicle_age_norm = ifelse(vehicle_age < 0,  # ifelse test condition
0,  # value if true
vehicle_age)  # value if false
) %>%
# below is just making it easier for us to see what we changed
select(starts_with("vehicle")) %>%
filter(vehicle_age < 0)
knitr::opts_chunk$set(echo = TRUE)
pollination <- read_csv("pollination.csv")
names(pollination)
View(pollination)
table(pollination$PopName)
names(pollination)
dc_data <- pollination %>%
filter(PopName == "David's Canyon") %>%
select(time=Time,
date=Date,
observer = Observer,
temp = Temp..begin.,
n_bees=Bee,
n_flowers=FlowObs,
minutes_observed=ObsevTime,
n_hawkmoths=HM,
HMrate,
Brate)
View(dc_data)
dc_data %>%
group_by(observer) %>%
slice_max(n_hawkmoths)
dc_data %>%
group_by(observer) %>%
summarise(moths = sum(n_hawkmoths),
bees = sum(n_bees),
flowers = sum(n_flowers))
dc_data %>%
filter(observer, !contains(CAM))
dc_data %>%
filter(observer != contains(CAM)) %>%
group_by(observer) %>%
summarise(moths = sum(n_hawkmoths),
bees = sum(n_bees),
flowers = sum(n_flowers))
dc_data %>%
filter(observer != str_detect("CAM")) %>%
group_by(observer) %>%
summarise(moths = sum(n_hawkmoths),
bees = sum(n_bees),
flowers = sum(n_flowers))
dc_data %>%
filter(observer != str_detect(., "CAM")) %>%
group_by(observer) %>%
summarise(moths = sum(n_hawkmoths),
bees = sum(n_bees),
flowers = sum(n_flowers))
dc_data %>%
filter(!str_detect(observer, "CAM")) %>%
group_by(observer) %>%
summarise(moths = sum(n_hawkmoths),
bees = sum(n_bees),
flowers = sum(n_flowers))
?case_when()
dc_data %>%
mutate(bees_minus_moths = n_bees - n_hawkmoths) %>%
mutate(more_bees = case_when(
bees_minus_moths > 0 ~ TRUE,
bees_minus_moths <= 0 ~ FALSE))
dc_data %>%
mutate(bees_minus_moths = n_bees - n_hawkmoths) %>%
mutate(more_bees = case_when(
bees_minus_moths > 0 ~ TRUE,
bees_minus_moths <= 0 ~ FALSE)) %>%
group_by(more_bees) %>%
summarise(how_many = n())
dc_data %>%
mutate(bees_minus_moths = n_bees - n_hawkmoths) %>%
mutate(most_common_pollinator = case_when(
bees_minus_moths > 0 ~ "bee",
bees_minus_moths < 0 ~ "hawkmoth",
bees_minus_moths = 0 ~ "both")) %>%
group_by(more_bees) %>%
summarise(how_many = n())
dc_data %>%
mutate(bees_minus_moths = n_bees - n_hawkmoths) %>%
mutate(most_common_pollinator = case_when(
bees_minus_moths > 0 ~ "bee",
bees_minus_moths < 0 ~ "hawkmoth",
bees_minus_moths == 0 ~ "both")) %>%
group_by(more_bees) %>%
summarise(how_many = n())
dc_data %>%
mutate(bees_minus_moths = n_bees - n_hawkmoths) %>%
mutate(most_common_pollinator = case_when(
bees_minus_moths > 0 ~ "bee",
bees_minus_moths < 0 ~ "hawkmoth",
bees_minus_moths == 0 ~ "both")) %>%
group_by(most_common_pollinator) %>%
summarise(how_many = n())
dc_data %>%
mutate(bees_minus_moths = n_bees - n_hawkmoths) %>%
mutate(most_common_pollinator = case_when(
bees_minus_moths > 0 ~ "bee",
bees_minus_moths < 0 ~ "hawkmoth",
bees_minus_moths == 0 ~ "both")) %>%
group_by(most_common_pollinator) %>%
summarise(how_many_plants = n())
getwd()
pollination <- read_csv("/Users/haley/Documents/GitHub/R-intro-tidyverse-2023/pollination.csv")
#View(pollination)
```
